---
layout: post
title: IOS 数据传递
categories: [ios]
tags: [ios]
description: ios 数据
---

1、delegate

{% highlight ruby %}

ViewController.h

@protocol ViewControllerDelegate <NSObject>


-(void) passData:(NSString * )data;

@end


@interface ViewController : UIViewController

@property(nonatomic,assign)id<ViewControllerDelegate> delegate;

@end


ViewController.m

- (IBAction)passAction:(id)sender {
    SecondController *second = [[SecondController alloc]init];
    self.delegate = (id)second;
    
    if([[self delegate] respondsToSelector:@selector(passData:)])
    {
        NSLog(@"passData");
        [[self delegate] passData:@"传递的数据"];
    }
}


#import "ViewController.h"
@interface SecondController : UIViewController<ViewControllerDelegate>


-(void)passData:(NSString *)data
{
    NSLog(@"passData:%@",data);
}

{% endhighlight %}


2、callback block

{% highlight ruby %}

CallBackBlock.h

typedef void (^MyCallbackBlock)(NSString *);
@interface CallBackBlock : NSObject

@property(nonatomic,copy)MyCallbackBlock callbackBlock;

-(id)initWithCallback:(MyCallbackBlock)block;
- (void)playMovie:(NSString *)title;
@end


CallBackBlock.m

#import "CallBackBlock.h"

@implementation CallBackBlock


-(id)initWithCallback:(MyCallbackBlock)block{
    if (self = [super init]) {
        self.callbackBlock = block;
    }
    return self;
}

- (void)playMovie:(NSString *)title {
    // play the movie
    self.callbackBlock(title);
}

- (void)dealloc {
    self.callbackBlock  = nil;
}

@end

使用
 self.block = [[CallBackBlock alloc]initWithCallback:^(NSString *title) {
        NSLog(@"title:%@",title);
 }];

 - (IBAction)myBlockAction:(id)sender {
    float random = arc4random();
    [self.block playMovie:[@(random) stringValue]];
    }];
 
}

{% endhighlight %}

3、block

{% highlight ruby %}

#import "ViewController.h"

typedef void(^SuccessBlock)(id obj);
typedef void (^completionHandler)(float result);

@interface BlockViewController : ViewController

-(void) addCalculationResultHandler:(completionHandler)handler;


#import "ViewController.m"

- (IBAction)myBlockAction:(id)sender {
  
    [self addCalculationResultHandler:^(float result) {
        NSLog(@"%f",result);
    }];
    
}

-(void)addCalculationResultHandler:(completionHandler)handler
{
   float random = arc4random();
    handler(random);
}

@end


{% endhighlight %}



